!function(){"use strict";var t="undefined"!=typeof document?document.currentScript:null;const e=new CSSStyleSheet;e.replaceSync(".lines {\n    stroke: black;\n    stroke-width: 0.3;\n    stroke-linecap: round;\n}\n.note {\n    stroke-width: 0.3;\n    stroke-linecap: round;\n}\n.button:active {\n    fill-opacity: 0.5;\n}\n.wheel {\n    fill-opacity: 0.8;\n    stroke-width: 0;\n    box-sizing: border-box;\n}\n\n/* Steps */\n.whole {\n    fill:none; \n    stroke:grey;\n    stroke-width: 0.4;\n    stroke-linejoin: round;\n}\n.half {\n    fill:none; \n    stroke:grey;\n    stroke-width: 0.4;\n    stroke-linejoin: round;\n    stroke-dasharray: 1;\n}\n\n/* Text */\n.wheel-text {\n    font: 8px monospace;\n    fill:darkslategray;\n    text-anchor: middle;\n    text-transform: uppercase;\n    user-select: none;\n}\n.major-text {\n    text-transform: uppercase;\n}\n.minor-text {\n    text-transform: lowercase;\n}\n.button-text {\n    font: 3.2px monospace;\n    text-anchor: middle;\n    user-select: none;\n}\n.code {\n    font: 4px monospace;\n    stroke-width: 0;\n    text-anchor: middle;\n}\n\n/* Notes */\n.C {\n    fill:rgb(255, 142, 161);\n    stroke: rgb(255, 142, 161);\n} \n.C.hover {\n    fill:rgb(236, 53, 83);\n    stroke: rgb(236, 53, 83);\n}\n.D {\n    fill:tomato;\n    stroke:tomato;\n}\n.D.hover {\n    fill:rgb(220, 34, 1);\n    stroke:rgb(220, 34, 1);\n}\n.E {\n    fill:orange;\n    stroke:orange;\n}\n.E.hover {\n    fill:rgb(226, 117, 0);\n    stroke:rgb(226, 117, 0);\n}\n.F {\n    fill:gold;\n    stroke:gold;\n}\n.F.hover {\n    fill:rgb(207, 193, 0);\n    stroke:rgb(207, 193, 0);\n}\n.G {\n    fill:rgb(157, 242, 135);\n    stroke:rgb(157, 242, 135);\n}\n.G.hover {\n    fill:rgb(82, 195, 54);\n    stroke:rgb(82, 195, 54);\n}\n.A {\n    fill:lightskyblue;\n    stroke:lightskyblue;\n}\n.A.hover {\n    fill:rgb(29, 156, 235);\n    stroke:rgb(29, 156, 235);\n}\n.B {\n    fill:plum;\n    stroke:plum;\n}\n.B.hover {\n    fill:rgb(165, 89, 165);\n    stroke:rgb(165, 89, 165);\n}\n#scale-container {\n    max-width: 700px;\n}");class s extends HTMLElement{constructor(){super(),this.container=null,this.parent=document.createElementNS("http://www.w3.org/2000/svg","g"),this.width=700,this.height=900,this.major=!0,this.startNote=0,this.wheel=null,this.button=null,this.root=this.attachShadow({mode:"open"}),this.root.adoptedStyleSheets.push(e),this.root.innerHTML='<div id="scale-container">\n  \x3c!-- <button id="button">Major</button>  --\x3e\n  \x3c!-- <text x="4.5" y="8" class="button-text">Major</text> --\x3e\n  <svg id="scale-svg" class="container" version="1.1" viewBox="0 0 100 200">\n    \x3c!--Major/Minor Button--\x3e\n    \x3c!-- <rect id="button" width="15" height="10" x="2" y="2" rx="2" ry="2" fill="black" fill-opacity="0.3" />\n    <text x="4.5" y="8" class="button-text">Major</text> --\x3e\n\n    \x3c!--Wheel--\x3e\n    \x3c!-- <g id="music-wheel" transform="rotate(0 50 35)">\n      <path class="wheel C"\n        d="M 50 35\n        L 36.981 7.972\n        A 30 30 0 0 1 63.014 7.97\n        L 50 35" />\n      <text x="47.5" y="20" class="title">C</text>\n\n      <path class="wheel D"\n        d="M 50 35\n        L 63.014 7.97\n        A 30 30 0 0 1 79.248 28.323\n        L 50 35" />\n      <text x="61" y="27" class="title">D</text>\n\n      <path class="wheel E"\n        d="M 50 35\n        L 79.248 28.323\n        A 30 30 0 0 1 73.455 53.704\n        L 50 35" />\n      <text x="64" y="41.5" class="title">E</text>\n\n      <path class="wheel F"\n        d="M 50 35\n        L 73.455 53.704\n        A 30 30 0 0 1 50 65\n        L 50 35" />\n      <text x="55.5" y="54" class="title">F</text>\n\n      <path class="wheel G"\n        d="M 50 35\n        L 50 65\n        A 30 30 0 0 1 26.548 53.708\n        L 50 35" />\n      <text x="40" y="53.5" class="title">G</text>\n\n      <path class="wheel A"\n        d="M 50 35\n        L 26.548 53.708\n        A 30 30 0 0 1 20.751 28.328\n        L 50 35" />\n      <text x="31.5" y="41" class="title">A</text>\n\n      <path class="wheel B"\n        d="M 50 35\n        L 20.751 28.328\n        A 30 30 0 0 1 36.981 7.972\n        L 50 35" />\n      <text x="34" y="26.5" class="title">B</text>\n    </g> --\x3e\n    \x3c!--<circle cx="50" cy="35" r="15" fill="grey" fill-opacity="0.5"/>--\x3e\n\n    \x3c!--Picker--\x3e\n    \x3c!-- <polygon points="50,9 47,2 53,2" fill="grey" fill-opacity="0.8"/> --\x3e\n\n    \x3c!--Staff--\x3e\n      \x3c!--Lines 3.25px apart--\x3e\n    \x3c!-- <line class="lines" x1="0" y1="70" x2="100" y2="70" />\n    <line class="lines" x1="0" y1="73.25" x2="100" y2="73.25" />\n    <line class="lines" x1="0" y1="76.5" x2="100" y2="76.5" />\n    <line class="lines" x1="0" y1="79.75" x2="100" y2="79.75" />\n    <line class="lines" x1="0" y1="83" x2="100" y2="83" /> --\x3e\n    \x3c!-- <image href="/assets/images/treble_clef.png" x="0" y="64" width="15" height="25" /> --\x3e\n    \n    \x3c!--Notes--\x3e\n      \x3c!--Notes 12px horiz, 1.6px vert apart--\x3e\n      \x3c!--Stems 8.7px long--\x3e\n    \x3c!--C--\x3e\n    \x3c!-- <g id="C-note" class="C note">\n      <ellipse cx="19" cy="86" rx="2" ry="1.2" transform="rotate(-18, 19, 86)" />\n      <line x1="20.9" y1="85.2" x2="20.9" y2="76.5" /> \n      <line x1="16" y1="86.25" x2="21.7" y2="86.25" />\n    </g> --\x3e\n\n    \x3c!--D--\x3e\n    \x3c!-- <g id="D-note" class="D note">\n      <ellipse cx="31" cy="84.4" rx="2" ry="1.2" transform="rotate(-18, 31, 84.4)" />\n      <line x1="32.9" y1="83.8" x2="32.9" y2="75.1" />\n    </g> --\x3e\n\n    \x3c!--E--\x3e\n    \x3c!-- <g id="E-note" class="E note">\n      <ellipse cx="42" cy="82.8" rx="2" ry="1.2" transform="rotate(-18, 42, 82.8)" />\n      <line x1="43.9" y1="82.3" x2="43.9" y2="73.6" />\n    </g> --\x3e\n\n    \x3c!--F--\x3e\n    \x3c!-- <g id="F-note" class="F note">\n      <ellipse cx="54" cy="81.2" rx="2" ry="1.2" transform="rotate(-18, 54, 81.2)" />\n      <line x1="55.9" y1="80.9" x2="55.9" y2="72.2" />\n    </g> --\x3e\n\n    \x3c!--G--\x3e\n    \x3c!-- <g id="G-note" class="G note">\n      <ellipse cx="66" cy="79.6" rx="2" ry="1.2" transform="rotate(-18, 66, 79.6)" />\n      <line x1="67.9" y1="79.5" x2="67.9" y2="70.8" />\n    </g> --\x3e\n\n    \x3c!--A--\x3e\n    \x3c!-- <g id="A-note" class="A note">\n      <ellipse cx="78" cy="78" rx="2" ry="1.2" transform="rotate(-18, 78, 78)" />\n      <line x1="79.9" y1="78.1" x2="79.9" y2="69.4" />\n    </g> --\x3e\n\n    \x3c!--B--\x3e\n    \x3c!-- <g id="B-note" class="B note">\n      <ellipse cx="90" cy="76.4" rx="2" ry="1.2" transform="rotate(-18, 90, 76.4)" />\n      <line x1="88.1" y1="77.3" x2="88.1" y2="86" />\n    </g> --\x3e\n\n    \x3c!--Whole/Half Steps--\x3e\n    \x3c!-- <g id="steps">\n      <polyline class="whole"\n        points="19 88, 25 92, \n          25 92, 31 86.4" />\n      <polyline class="whole"\n        points="31 86.4, 37 90.6, \n          37 90.6, 43 84.8" />\n      <polyline class="half"\n        points="43 84.8, 49 89.2, \n          49 89.2, 55 83.2" />\n      <polyline class="whole"\n        points="55 83.2, 61 87.8, \n          61 87.8, 67 81.6" />\n      <polyline class="whole"\n        points="67 81.6, 73 86.4, \n          73 86.4, 79 80" />\n      <polyline class="whole"\n        points="79 80, 85 85, \n          85 85, 91 78.4" />\n    </g> --\x3e\n\n    \x3c!--Code--\x3e\n    \x3c!-- <g id="code-block">\n      <rect width="38" height="44.5" x="31" y="99" rx="2" ry="2" fill="black" fill-opacity="0.7"/>\n      <text x="36" y="105" class="code C">playNote(60)</text>  \n      <text x="36" y="110" class="code D">playNote(62)</text>  \n      <text x="36" y="115" class="code E">playNote(64)</text>\n      <text x="36" y="120" class="code F">playNote(65)</text>    \n      <text x="36" y="125" class="code G">playNote(67)</text>  \n      <text x="36" y="130" class="code A">playNote(69)</text> \n      <text x="36" y="135" class="code B">playNote(71)</text>  \n      <text x="36" y="140" class="code C">playNote(72)</text>  \n    </g>   --\x3e\n  </svg>\n</div>'}connectedCallback(){this.container=this.root.querySelector("svg.container"),this.container?.append(this.parent),this.container?.setAttribute("viewBox","0 0 100 1000"),console.log(this.container),this.render(!0,!0);const e=this.root.querySelectorAll(".note");console.log("connected",e),new URL("/assets/patches/grand-piano/patch.json",t&&t.src||new URL("example.min.js",document.baseURI).href),e?.forEach((t=>{t.addEventListener("click",(e=>{console.log("clicked on "+t.classList)}));let e=this.root.querySelectorAll(`.${t.classList[1]}`);t.addEventListener("mouseout",(t=>{e?.forEach((t=>{t.classList.contains("hover")&&t.classList.remove("hover")}))})),t.addEventListener("mouseover",(s=>{if(t.classList.contains("wheel"))e?.forEach((t=>{t.classList.add("hover")}));else{t.classList.contains("first")?e=this.root.querySelectorAll(`.${t.classList[1]}.first`):t.classList.contains("last")&&(e=this.root.querySelectorAll(`.${t.classList[1]}.last`)),e?.forEach((t=>{t.classList.add("hover")}));const s=this.root.querySelector(`.wheel.${t.classList[1]}`);s&&s.classList.add("hover")}}))}))}disconnectedCallback(){}attributeChangedCallback(t,e,s){}update(t,e){null!=t&&(this.major=t,this.render(!1,!0)),null!=e&&(this.startNote=s.NOTES.indexOf(e),this.render(!1,!1))}render(t,e){if(null==this.container)return;this.parent.innerHTML="",e||t?(this.wheel=new i(this.major,this.startNote,this),this.parent.append(this.wheel.el),this.button=new n(this.major,this),this.parent.append(this.button.el)):(this.wheel&&this.parent.append(this.wheel.el),this.button&&this.parent.append(this.button.el));const s=new r(this.major,this.startNote,this);this.parent.append(s.el);const l=new a(this.major,this.startNote,this);this.parent.append(l.el)}}s.ELEMENT="music-scale",s.observedAttributes=["min-value","max-value","value"],s.NOTES=["C","D","E","F","G","A","B"],s.MIDI=[60,62,64,65,67,69,71,72];class n{get x(){return 2}get y(){return 2}get height(){return 10}get width(){return 26}constructor(t,e){this.el=document.createElementNS("http://www.w3.org/2000/svg","g"),this.major=t,this.scale=e;const s=document.createElementNS("http://www.w3.org/2000/svg","rect");s.setAttribute("x",`${this.x}`),s.setAttribute("y",`${this.y}`),s.setAttribute("width",`${this.width}`),s.setAttribute("height",`${this.height}`),s.setAttribute("rx","2"),s.setAttribute("ry","2"),s.setAttribute("fill","black"),s.setAttribute("fill-opacity","0.3"),s.classList.add("button"),this.el.append(s);const n=document.createElementNS("http://www.w3.org/2000/svg","text");n.classList.add("button-text"),n.setAttribute("x",""+(this.x+this.width-this.width/2)),n.setAttribute("y",""+(this.y+this.height-this.height/2)),n.setAttribute("dominant-baseline","central"),n.innerHTML=this.major?"Major Scales":"minor scales",this.el.append(n),this.el.addEventListener("click",(t=>{this.major=!this.major,n.innerHTML=this.major?"Major Scales":"minor scales",e.update(this.major,null)}))}}class i{get cx(){return 50}get cy(){return 39}get r(){return 25}get numSectors(){return 7}get angle(){return 360/this.numSectors*(Math.PI/180)}get offset(){return Math.PI/180*12.83}get pickerCoords(){return[[50,18],[47,11],[53,11]]}constructor(t,e,s){this.el=document.createElementNS("http://www.w3.org/2000/svg","g"),this.wheel=document.createElementNS("http://www.w3.org/2000/svg","g"),this.text=document.createElementNS("http://www.w3.org/2000/svg","g"),this.down=!1,this.scale=s;let n,r=e+1;for(let e=0;e<this.numSectors;e++){n=i.NOTES[(r+7)%7];const s=this.r*Math.cos(this.angle*(e+1)+this.offset)+this.cx,a=Math.abs(this.r*Math.sin(this.angle*(e+1)+this.offset)-this.cy),l=this.r*Math.cos(this.angle*e+this.offset)+this.cx,o=Math.abs(this.r*Math.sin(this.angle*e+this.offset)-this.cy),c=document.createElementNS("http://www.w3.org/2000/svg","path");c.setAttribute("d",`M ${this.cx} ${this.cy} \n                L ${s} ${a}\n                A ${this.r} ${this.r} 0 0 1 ${l} ${o}\n                L ${this.cx} ${this.cy}`),c.classList.add("wheel"),c.classList.add(n),c.classList.add("note"),this.wheel.append(c);const h=document.createElementNS("http://www.w3.org/2000/svg","text");h.setAttribute("x",""+(s+l+this.cx)/3),h.setAttribute("y",""+(a+o+this.cy)/3),h.setAttribute("dominant-baseline","central"),h.innerHTML=`${n}`,t?h.classList.add("major-text"):h.classList.add("minor-text"),h.classList.add("wheel-text"),this.text.append(h),r--}this.wheel.append(this.text),this.el.append(this.wheel);const a=document.createElementNS("http://www.w3.org/2000/svg","polygon");a.setAttribute("points",`${this.pickerCoords[0][0]} ${this.pickerCoords[0][1]}, \n            ${this.pickerCoords[1][0]} ${this.pickerCoords[1][1]}, \n            ${this.pickerCoords[2][0]} ${this.pickerCoords[2][1]}`),a.setAttribute("fill","grey"),a.setAttribute("fill-opacity","0.8"),this.el.append(a);let l=-1,o=-1,c=0;this.el.addEventListener("pointerdown",(t=>{this.down=!0,l=t.clientX,o=t.clientY})),document.addEventListener("pointermove",(t=>{if(this.down){const e=l-t.clientX,s=o-t.clientY;c=180*Math.atan2(s,e)/Math.PI,this.wheel.setAttribute("transform",`rotate(${c} ${this.cx} ${this.cy})`);const n=this.wheel.querySelectorAll(".wheel-text");n?.forEach((t=>{t.setAttribute("transform",`rotate(${-c} \n                        ${t.getAttribute("x")} \n                        ${t.getAttribute("y")})`)}))}let e=this.el.querySelectorAll(".wheel");e?.forEach((t=>{const e=t.getBoundingClientRect(),n=a.getBoundingClientRect(),i=(n.right+n.left)/2;i<=e.right&&i>=e.left&&n.bottom<=e.bottom&&n.top>=e.top&&s.update(null,t.classList.item(1))}))})),document.addEventListener("pointerup",(t=>{this.down&&(this.down=!1)}))}}i.NOTES=["C","D","E","F","G","A","B"];class r{get max(){return 70}get min(){return this.max+13}get x0(){return 18}get y0(){return 86}constructor(t,e,s){this.el=document.createElementNS("http://www.w3.org/2000/svg","g"),this.staff=document.createElementNS("http://www.w3.org/2000/svg","g"),this.scale=s;for(let t=0;t<5;t++){const e=document.createElementNS("http://www.w3.org/2000/svg","line");let s=this.max+3.25*t;e.setAttribute("x1","0"),e.setAttribute("y1",`${s}`),e.setAttribute("x2","100"),e.setAttribute("y2",`${s}`),e.classList.add("lines"),this.staff.append(e)}const n=document.createElementNS("http://www.w3.org/2000/svg","image");n.setAttribute("href","/assets/images/treble_clef.png"),n.setAttribute("x","0"),n.setAttribute("y","64"),n.setAttribute("width","15"),n.setAttribute("height","25"),this.staff.append(n),this.el.append(this.staff);let i,a=this.min+2,l=this.max-2,o=(a+l)/2,c=e;for(let s=0;s<8;s++){const n=document.createElementNS("http://www.w3.org/2000/svg","g"),h=document.createElementNS("http://www.w3.org/2000/svg","ellipse");i=r.NOTES[(c+7)%7];let d=this.x0+11*(c-e),x=this.y0-1.6*c;h.setAttribute("cx",`${d}`),h.setAttribute("cy",`${x}`),h.setAttribute("rx","2"),h.setAttribute("ry","1.2"),h.setAttribute("transform",`rotate(-18, ${d}, ${x})`),n.append(h);const p=document.createElementNS("http://www.w3.org/2000/svg","line");if(x>o?(p.setAttribute("x1",`${d+1.9}`),p.setAttribute("y1",""+(x-.8)),p.setAttribute("x2",`${d+1.9}`),p.setAttribute("y2",""+(x-9.5))):(p.setAttribute("x1",""+(d-1.9)),p.setAttribute("y1",`${x+.8}`),p.setAttribute("x2",""+(d-1.9)),p.setAttribute("y2",`${x+9.5}`)),n.append(p),x>a||x<l){const t=document.createElementNS("http://www.w3.org/2000/svg","line");t.setAttribute("x1",""+(d-3)),t.setAttribute("x2",`${d+2.7}`),c%2==0?(t.setAttribute("y1",`${x+.25}`),t.setAttribute("y2",`${x+.25}`)):x<l?(t.setAttribute("y1",`${x+1.25}`),t.setAttribute("y2",`${x+1.25}`)):(t.setAttribute("y1",""+(x-1.25)),t.setAttribute("y2",""+(x-1.25))),n.append(t)}switch(i){case"C":switch(e){case 1:case 2:case 5:t&&n.append(this.drawSharp(d,x));break;case 6:n.append(this.drawSharp(d,x))}break;case"D":switch(e){case 2:case 6:t&&n.append(this.drawSharp(d,x));break;case 3:t||n.append(this.drawFlat(d,x))}break;case"E":switch(e){case 0:case 3:case 4:t||n.append(this.drawFlat(d,x))}break;case"F":switch(e){case 1:case 4:case 5:t&&n.append(this.drawSharp(d,x));break;case 2:case 6:n.append(this.drawSharp(d,x))}break;case"G":switch(e){case 2:case 5:case 6:t&&n.append(this.drawSharp(d,x))}break;case"A":switch(e){case 6:t&&n.append(this.drawSharp(d,x));break;case 0:case 3:t||n.append(this.drawFlat(d,x))}break;case"B":switch(e){case 0:case 1:case 4:t||n.append(this.drawFlat(d,x));break;case 3:n.append(this.drawFlat(d,x))}}if(7!=s){const e=document.createElementNS("http://www.w3.org/2000/svg","polyline");t?2==s||6==s?e.classList.add("half"):e.classList.add("whole"):1==s||4==s?e.classList.add("half"):e.classList.add("whole"),e.setAttribute("points",`${d+.6} ${x+2.2}, \n                    ${d+5.5} ${x+6}, \n                    ${d+5.5} ${x+6}, \n                    ${d+10.4} ${x+.6}`),this.el.append(e)}n.classList.add("staff"),n.classList.add(i),0==s?n.classList.add("first"):7==s&&n.classList.add("last"),n.classList.add("note"),this.el.append(n),c++}}drawSharp(t,e){const s=document.createElementNS("http://www.w3.org/2000/svg","g"),n=document.createElementNS("http://www.w3.org/2000/svg","line"),i=document.createElementNS("http://www.w3.org/2000/svg","line"),r=document.createElementNS("http://www.w3.org/2000/svg","line"),a=document.createElementNS("http://www.w3.org/2000/svg","line");return n.setAttribute("x1",""+(t-5)),n.setAttribute("y1",`${e+1}`),n.setAttribute("x2",""+(t-3)),n.setAttribute("y2",""+(e-1)),s.append(n),i.setAttribute("x1",""+(t-5)),i.setAttribute("y1",`${e+3}`),i.setAttribute("x2",""+(t-3)),i.setAttribute("y2",`${e+1}`),s.append(i),r.setAttribute("x1",""+(t-4.35)),r.setAttribute("y1",`${e+4.5}`),r.setAttribute("x2",""+(t-4.35)),r.setAttribute("y2",""+(e-1.5)),s.append(r),a.setAttribute("x1",""+(t-3.55)),a.setAttribute("y1",`${e+3.5}`),a.setAttribute("x2",""+(t-3.55)),a.setAttribute("y2",""+(e-2.5)),s.append(a),s}drawFlat(t,e){const s=document.createElementNS("http://www.w3.org/2000/svg","g"),n=document.createElementNS("http://www.w3.org/2000/svg","line"),i=document.createElementNS("http://www.w3.org/2000/svg","path");return n.setAttribute("x1",""+(t-4.35)),n.setAttribute("y1",`${e+1.5}`),n.setAttribute("x2",""+(t-4.35)),n.setAttribute("y2",""+(e-4.5)),s.append(n),i.setAttribute("d",`M ${t-4.35} ${e} A 2.5 0.5 -45 0 1 ${t-4.35} ${e+1.5}`),i.setAttribute("fill","none"),s.append(i),s}}r.NOTES=["C","D","E","F","G","A","B"];class a{get x(){return 31}get y(){return 97}get height(){return 44.5}get width(){return 38}constructor(t,e,n){this.el=document.createElementNS("http://www.w3.org/2000/svg","g"),this.rect=document.createElementNS("http://www.w3.org/2000/svg","rect"),this.scale=n,this.rect.setAttribute("x",`${this.x}`),this.rect.setAttribute("y",`${this.y}`),this.rect.setAttribute("width",`${this.width}`),this.rect.setAttribute("height",`${this.height}`),this.rect.setAttribute("rx","2"),this.rect.setAttribute("ry","2"),this.rect.setAttribute("fill","black"),this.rect.setAttribute("fill-opacity","0.7"),this.el.append(this.rect);let i=e,r=e+60;for(let e=0;e<8;e++){const n=document.createElementNS("http://www.w3.org/2000/svg","text");n.setAttribute("x",""+(this.x+this.width-this.width/2+.7)),n.setAttribute("y",`${this.y+5+5*e}`),n.setAttribute("dominant-baseline","central"),n.innerHTML=`playNote(${r})`,s.MIDI[e]=r,r+=t?2==e||6==e?1:2:1==e||4==e?1:2,n.classList.add("code"),n.classList.add(a.NOTES[(i+7)%7]),0==e?n.classList.add("first"):7==e&&n.classList.add("last"),n.classList.add("note"),this.el.append(n),i++}}}a.NOTES=["C","D","E","F","G","A","B"],customElements.define(s.ELEMENT,s)}();
//# sourceMappingURL=example.min.js.map
